---
title: "Caso de estudio Bellabeat"
author: "Enzo Presta"
date: "05/01/2023"
output: 
  html_document: 
    highlight: zenburn
---

```{css, echo=FALSE}
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Overpass:wght@200;400;800&display=swap');
body {
    color: white;
    background-color: #28282b;
}
p, ul {
  font-family: 'Overpass', sans-serif;
  font-size: 18px;
  font-weight: 200;
}
h1 {
  font-family: 'Overpass', sans-serif;
  font-size: 36px;
  font-weight: 800;
}
h2 {
  font-family: 'Overpass', sans-serif;
  font-size: 24px;
}
h4 {
  font-family: 'Overpass', sans-serif;
  font-size: 16px;
}
code {
  font-family: 'JetBrains Mono', monospace;
  font-size: 14px;
}
table {
  font-family: 'Overpass', sans-serif;
  font-size: 18px;
}
```

<br>

Este proyecto supone la parte final del Certificado profesional de Análisis de datos de Google. Es mi primer proyecto de análisis de datos. Voy a utilizar el lenguaje de programación R, y la [notebook realizada por Anastasiia Chebotina](https://www.kaggle.com/code/chebotinaa/bellabeat-case-study-with-r) como guía.

<br>

<h1> **Acerca de Bellabeat** </h1>

[Bellabeat](https://bellabeat.com/) es una empresa de alta tecnología que fabrica productos inteligentes focalizados en el cuidado de la salud femenina. Recopilar datos sobre la actividad física, el sueño, el estrés y la salud reproductiva le ha permitido a Bellabeat proporcionar a las mujeres conocimientos sobre su propia salud y sus hábitos. La empresa invirtió en medios publicitarios tradicionales, como radio, cartelería en la vía pública, prensa gráfica y televisión, pero se centra mayormente en el marketing digital. Bellabeat invierte todo el año en Google Search, mantiene activas las páginas de Facebook e Instagram e interactúa de manera constante con los consumidores en Twitter. A su vez, Bellabeat publica anuncios por video en YouTube y avisos publicitarios en Red de Display de Google para apoyar las campañas en fechas de marketing claves.

<br>

<h1> **Tarea empresarial** </h1>

-   Analizar los datos de los dispositivos inteligentes de Fitbit para conocer el uso de los mismos
-   Proponer recomendaciones sobre cómo estas tendencias pueden colaborar en la estrategia de marketing de Bellabeat

<br>

<h1> **Comienzo** </h1>

<h2> **Importando librerías** </h2>

```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
library(knitr)
```

<br>

<h2> **Importando conjuntos de datos** </h2>

Para este trabajo voy a utilizar [Fitbit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit), son datos públicos proporcionados voluntariamente por usuarios de esta marca

```{r message=FALSE, warning=FALSE}
activity <- read_csv("Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
calories <- read_csv("Fitabase Data 4.12.16-5.12.16/hourlyCalories_merged.csv")
intensities <- read_csv("Fitabase Data 4.12.16-5.12.16/hourlyIntensities_merged.csv")
sleep <- read_csv("Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
weight <- read_csv("Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```

<br>

<h2> **Formateo de fecha y hora, orden de columnas y correción de sus nombres** </h2>

```{r}
# ACTIVIDAD
activity$ActivityDate=as.POSIXct(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")
activity <- activity[,-2]
activity <- activity[,c(1, 15, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14)]
activity <- clean_names(activity)

# CALORÍAS
calories$ActivityHour=as.POSIXct(calories$ActivityHour, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
calories$time <- format(calories$ActivityHour, format = "%H:%M:%S")
calories$date <- format(calories$ActivityHour, format = "%m/%d/%y")
calories <- calories[, -2]
calories <- calories[, c(1, 4, 3, 2)]
calories <- clean_names(calories)

# INTENSIDAD
intensities$ActivityHour=as.POSIXct(intensities$ActivityHour, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
intensities$time <- format(intensities$ActivityHour, format = "%H:%M:%S")
intensities$date <- format(intensities$ActivityHour, format = "%m/%d/%y")
intensities <- intensities[,-2]
intensities <- intensities[,c(1, 5, 4, 2, 3)]
intensities <- clean_names(intensities)

# SUEÑO
sleep$SleepDay=as.POSIXct(sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")
sleep <- sleep[, -2]
sleep <- sleep[, c(1, 5, 2, 3, 4)]
sleep <- clean_names(sleep)

# PESO
weight <- clean_names(weight)
weight$date=as.POSIXct(weight$date, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
weight$time <- format(weight$date, format = "%H:%M:%S")
weight$date <- format(weight$date, format = "%m/%d/%y")
```

<br>

<h2> **Eliminación de entradas duplicadas** </h2>

```{r message=FALSE, warning=FALSE}
get_dupes(sleep) %>% kable(align = "c")
sleep <- distinct(sleep)
```

<br>

<h1> **Exploración de los datos** </h1>

```{r message=FALSE, warning=FALSE}
weight %>% distinct(id) %>% kable(align = "l")
```

Al tener solamente 8 personas en este conjunto, no es recomendable sacar conclusiones basadas en estos datos sobre el peso corporal

<br>

**Vamos a echar un vistazo a la actividad física en general, hay cosas que me parecen importantes destacar:**

<br>

```{r}
activity %>%
  select(pasos_totales=total_steps, 
         distancia_total=total_distance, 
         distancia_intensa=very_active_distance,
         distancia_moderada=moderately_active_distance, 
         distancia_ligera=light_active_distance) %>%
  summary() %>% 
  kable(align = "c")
```

<br>

-   Si bien distintas organizaciones hacen hincapié en la intensidad del ejercicio y no tanto en la cantidad de pasos y la distancia en kilómetros necesaria, con unos 7850 pasos al día bastaría para cumplir con sus recomendaciones. El promedio de pasos en estos datos es de 7638, un poco por debajo de lo ideal

-   La mayoría de la distancia medida fue con **actividad baja**

<br>

```{r}
activity %>% 
  select(minutos_intensos=very_active_minutes,
         minutos_considerables=fairly_active_minutes,
         minutos_ligeros=lightly_active_minutes,
         minutos_sedentarios=sedentary_minutes) %>%
  summary() %>% 
  kable(align = "c")
```

<br>

-   Tanto la OMS como el CDC de EE.UU. recomiendan de 150 a 300 minutos de actividad moderada y de 75 a 150 minutos de actividad intensa por día. **Estos números están muy por debajo de eso**

-   El promedio de sedentarismo es de 991 minutos por día, lo cual equivale a **16 horas y media**

<br>

```{r}
sleep %>% 
  select(total_descansos=total_sleep_records, 
         total_minutos_durmiendo=total_minutes_asleep,
         total_minutos_en_cama=total_time_in_bed) %>% 
  summary() %>% 
  kable(align = "c")
```

<br>

-   Promedialmente estas personas duermen una vez al día, unas 6 horas y 54 minutos, y pasan 7 horas y 36 minutos en la cama

<br>

<h1> **Visualización de los datos** </h1>

<br>

Antes de empezar a visualizar, voy a combinar los conjuntos de datos, intensidad con calorías y actividad con sueño, utilizando *inner join*

<br>

```{r}
merged_data_ic <- merge(intensities, calories, by=c('id', 'date', 'time'))
merged_data_as <- merge(activity, sleep, by=c('id', 'date'))
```

<br>

```{r message=FALSE, warning=FALSE}
ggplot(data=merged_data_ic, aes(x=total_intensity, y=calories)) + 
  geom_point(color='magenta') + geom_smooth(color='black') + 
  labs(title="Intensidad vs Calorías",
  x="Intensidad", y="Calorías")
```

<br>

Como era de suponer, hay una correlación positiva entre la intensidad de la actividad y las calorías quemadas

<br>

```{r message=FALSE, warning=FALSE}
ggplot(data=merged_data_as, aes(x=sedentary_minutes, y=total_minutes_asleep)) +
  geom_point(color='magenta') + geom_smooth(color='black') + 
  labs(title="Minutos Sedentarios vs Minutos Durmiendo",
  x="Minutos Sedentarios", y="Minutos Durmiendo")
```

<br>

Salvo algunas excepciones la tendencia es muy mala, cuantos más minutos sedentarios se registran, la persona duerme menos. Aún así creo que faltan datos para sostener esta afirmación, puede que el sedentarismo no sea lo único que genera este problema

<br>

```{r message=FALSE, warning=FALSE}
mean_intensities <- intensities %>% 
  group_by(time) %>% 
  summarise(mean_per_hour = mean(total_intensity))

ggplot(data = mean_intensities, aes(x=time, y=mean_per_hour)) +
  geom_histogram(stat="identity", fill='darkred') + 
  theme(axis.text.x = element_text(angle = 90)) + 
  labs(title = "Promedio de Intensidad vs Hora",
  x="Hora", y="Promedio de Intensidad")

```
<br>
<br>

Los registros más altos se ubican entre las 17 y las 19 horas, coincide con el horario de salida de muchos trabajos

<br>
<br>

Bellabeat tiene productos para el ciclo menstrual, dado que Fitbit no los tiene, los conjuntos con los que estoy trabajando carecen de ese tipo de datos, por lo tanto no puedo proporcionar información relevante al respecto.

<br>
<br>

<h1> **Recomendaciones para la empresa** </h1>

<br>

Recopilar datos sobre la actividad física, el sueño, el estrés y la salud reproductiva le ha permitido a Bellabeat proporcionar a las mujeres conocimientos sobre su propia salud y sus hábitos. Desde su fundación, en 2013, Bellabeat creció a un ritmo vertiginoso y rápidamente se posicionó como empresa de bienestar impulsada por la tecnología para las mujeres.

<br>

**Luego de haber analizado los datos, puedo hacer recomendaciones que ayudarían a la estrategia de marketing:**

<br>

<h2> **Llegar al público correcto:** </h2>

-   Mujeres que realizan actividad física y buscan mejorar su bienestar corporal, dado el horario de mayor registro de actividad visto en el último gráfico, preferentemente que finalicen sus actividades en las horas adecuadas para que puedan luego hacer actividad física sin problema

-   Mujeres sedentarias que puedan permitirse pagar la membresía y recibir el asesoramiento adecuado sobre nutrición, actividad física, sueño, salud y belleza, basado en su estilo de vida

<br>

<h2> **Sacarle más provecho a la app:** </h2>

-   Establecer un sistema de notificaciones más completo y que abarque muchos aspectos, como por ejemplo hacerle acuerdo al usuario de que camine lo suficiente, que vaya a dormir si se detecta que está muchas horas despierto, etc. Pero intentar que no sea muy molesto para el usuario si recibe demasiadas de estas notificaciones

-   Ofrecerle al usuario diferentes opciones de menú diario, dependiendo la actividad que haga y que se adapte a sus gustos

-   Motivar encarecidamente al usuario a aumentar su actividad física si se detectan altos niveles de sedentarismo y aumento de peso, en ciertos casos puede ser necesario recomendarle que visite a su médico. Me parece importante que el usuario sienta que se lo está cuidando

<br>

Aquí finaliza mi trabajo, espero que haya sido de utilidad, y muchas gracias por su atención

<br>
